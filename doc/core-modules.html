<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <title>KISSY - 全终端适配的 JS 类库</title>
  <meta name="viewport" content="width=device-width">
  <link href="http://fonts.googleapis.com/css?family=Droid+Sans|Lekton|Ubuntu+Mono:400,700" rel="stylesheet">
	<link rel="stylesheet" href="templates/assets/bootstrap.css">
	<link href="templates/assets/normalize.css" rel="stylesheet">
	<link href="templates/assets/kissy.css" rel="stylesheet">
	<link href="templates/assets/prettify.css" rel="stylesheet">
	<link href="templates/assets/forkit.css" rel="stylesheet">
	<script src="templates/assets/jquery.min.js"></script>
	<script src="templates/assets/script.js" type="text/javascript"></script>
	<script src="http://a.tbcdn.cn/s/kissy/1.3.0/seed-min.js"></script>
	<script src="api/assets/highlight.pack.js"></script>
	<link href="api/assets/tomorrow-night-bright.css" rel=stylesheet />
	<link rel="shortcut icon" href="http://a.tbcdn.cn/s/kissy/favicon.ico">
</head>

<body class="">
    <nav id="sidebar">
    <header><a href="http://"><img src="http://dummyimage.com/146x164/000/fff"></a></header>
    <ul>
      <li class="nav-divider"><a href="index.html"><img src="templates/assets/img/icon-home.png">首页</a></li>
      <li class="nav-divider"><a href="why-kissy.html"><img src="templates/assets/img/icon-why.png">Why KISSY?</a></li>
      <li><a href=""><img src="templates/assets/img/icon-getting-started.png">Getting Started (1.4.0)</a></li>
      <li class="nav-sub"><a href="core-modules.html">理解 KISSY 的文件结构</a></li>
      <li class="nav-sub"><a href="roadmap.html">Hello World</a></li>
      <li class="nav-sub"><a href="deployment.html">KISSY 模块规范 (KMD)</a></li>
      <li class="nav-sub"><a href="support.html">浏览器兼容基准(GBS)</a></li>
      <li class="nav-sub nav-divider"><a href="/support.html">历史版本</a></li>
      <li><a href="">进阶指南</a></li>
      <li class="nav-sub"><a href="">jQuery KISSY 对比手册</a></li>
      <li class="nav-sub nav-divider"><a href="">KISSY 组件开发规范</a></li>
      <li><a href="">API Doc</a></li>
      <li><a href="">核心模块列表</a></li>
      <li><a href="">Demos</a></li>
      <li class="nav-divider"><a href="">KISSY Gallery</a></li>
      <li><a href="">KISSY 项目构建工具</a></li>
      <li class="nav-sub"><a href="">KS Module Compiler</a></li>
      <li class="nav-sub"><a href="">ABC</a></li>
      <li class="nav-sub nav-divider"><a href="">Clam</a></li>
      <li><a href="">为 KISSY 贡献代码</a></li>
      <li class="nav-sub"><a href="">HTML 编码规范</a></li>
      <li class="nav-sub"><a href="">CSS 编码规范</a></li>
      <li class="nav-sub nav-divider"><a href="">JavaScript 编码规范</a></li>
	  <li><a href=""><img src="templates/assets/img/icon-documentation.png">1.3.x->1.4.0 升级指南</a></li>
	  <li><a href=""><img src="templates/assets/img/icon-faqs.png">FAQ</a></li>
      <li><a href=""><img src="templates/assets/img/icon-github.png">GitHub</a></li>
	  <li><a href=""><img src="templates/assets/img/icon-google-plus.png">KISSY 核心小组</a></li>
    </ul>
  </nav>

  <div id="content">
    <article>
      

	<h1>KISSY 的文件结构</h1>
<h2>KISSY 架构</h2>
<h3>核心模块划分</h3>
<p><img src="http://gtms03.alicdn.com/tps/i3/T1vwyBFihXXXbzxlgn-531-626.png" alt=""></p>
<ul>
<li><strong>Seed</strong>：KISSY 种子文件，包含基础的面向对象支持、模块加载器、Lang 增强、UA，所有 KISSY 应用必须载入种子文件。种子不包含 DOM、Node 等常用功能，需要开发者按需引入。</li>
<li><strong>Components</strong>：颗粒化的功能单元，是比较常用的模块，二八原则中的那20%，这些是官方提供的可靠的模块。</li>
<li><strong>Widgets</strong>：组件，分为官方提供和非官方提供。非官方组件由第三方开发，存储于 Gallery 内，官方组件和 Components 组件一样，直接<code>KISSY.use(&#39;modName&#39;)</code>来载入。</li>
</ul>
<blockquote>
<p>从 KISSY 1.4.0 开始，将不再提供<code>kissy.js</code>，只提供<code>seed.js</code>，目的是强制用户按需加载，避免无用组件的载入，尽可能的减少请求的体积。因此，开发者需要熟练掌握核心组件的使用，尤其是图中加粗的部分。</p>
</blockquote>
<p>Seed 和 Components 模块说明：</p>
<table class="table table-bordered table-condensed">
<thead>
    <tr>
        <th>
            模块名称
        </th>
        <th>
            模块描述
        </th>
    </tr>
</thead>
<tbody>
    <tr class="success">
        <td>
            <strong>seed</strong>
        </td>
        <td>
            引入种子后会包含这些核心组件：loader/features/path/ua/promise/uri/lang
        </td>
    </tr>
    <tr>
        <td>
            io
        </td>
        <td>
            Ajax 模块，包括 JSONP、抓取远程脚本等
        </td>
    </tr>
    <tr>
        <td>
            dom
        </td>
        <td>
            元素操作相关
        </td>
    </tr>
    <tr>
        <td>
            event
        </td>
        <td>
            事件
        </td>
    </tr>
    <tr>
        <td>
            base
        </td>
        <td>
            经典的面向对象实现，包含Attr、EventHost、Plugin等
        </td>
    </tr>
    <tr>
        <td>
            anim
        </td>
        <td>
            动画
        </td>
    </tr>
    <tr>
        <td>
            json
        </td>
        <td>
            json 解析和反解析
        </td>
    </tr>
    <tr>
        <td>
            kison
        </td>
        <td>
            KISSY 对象格式
        </td>
    </tr>
    <tr>
        <td>
            cookie
        </td>
        <td>
            cookie 读写
        </td>
    </tr>
    <tr>
        <td>
            color
        </td>
        <td>
            颜色格式
        </td>
    </tr>
    <tr>
        <td>
            dd
        </td>
        <td>
            拖拽，drag and drop
        </td>
    </tr>
    <tr>
        <td>
            overlay
        </td>
        <td>
            浮层展示
        </td>
    </tr>
    <tr>
        <td>
            resizable
        </td>
        <td>
            放大缩小功能
        </td>
    </tr>
    <tr>
        <td>
            xtemplate
        </td>
        <td>
            模板引擎
        </td>
    </tr>
    <tr>
        <td>
            import-style
        </td>
        <td>
            css loader
        </td>
    </tr>
    <tr>
        <td>
            html-parser
        </td>
        <td>
            HTML 解析器
        </td>
    </tr>
</tbody>
</table>

<h3>DOM/Event 选择性载入子模块</h3>
<p>根据硬件环境的不同，KISSY 会选择性加载所需模块，比如<code>dom/ie</code>模块，显然不是为了 Mobile 准备的，再比如<code>event/shake</code>模块，显然在 Mobile 设备中也不会载入，再比如 IE&lt;9 下会补充加载<code>event/hashchange</code>。即，dom 和 event 模块是和环境强相关，<strong>作为开发者，不必去关心这些模块什么情况下怎么载入</strong>，只需了解 KISSY 已经为你处理好了硬件探测，一定会加载正确的最小模块集合。</p>
<p><img src="http://gtms03.alicdn.com/tps/i3/T1uuWxFdNfXXbymbv1-273-231.png" alt=""></p>
<blockquote>
<p>KISSY 这种处理兼容性的方式为 <a href="http://www.hongkiat.com/blog/html5-shiv-polyfills/">shim</a>。在涉及到处理浏览器在实现标准 API 上的差异性时，这种方法又被称为 <a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills">polyfills</a>。是一种流行的特性检测的方法。</p>
</blockquote>
<h3>通过命名空间来引用模块</h3>
<p>KISSY 的模块设计依赖于命名空间，<strong>官方模块只需通过名称来引用</strong>即可，比如</p>
<pre><code>// 加载 node、io、editor
KISSY.use(&#39;node, io, editor&#39;,function(S,Node,IO,Editor){
    // Your Code...    
});</code></pre>
<p>非官方模块推荐使用<code>包名+模块名</code>来引用，比如</p>
<pre><code>// 引用 Gallery 中的组件
KISSY.use(&#39;gallery/slide/1.1/index&#39;,function(S,Slide){
    // Your Code...    
});</code></pre>
<p>在引用这种非官方模块之前，需要首先定义<strong>包</strong>，形如：</p>
<pre><code>KISSY.config({
    packages:[
        {
            name:&quot;gallery&quot;,
            path:&#39;http://a.tbcdn.cn/s/kissy/gallery&#39;,
            ignorePackageNameInUri:true
        }
    ]
});</code></pre>
<p>在引用包+模块时，对应关系如下，其中蓝色部分为包路径，黄色部分为模块的相对路径：</p>
<p><img src="http://gtms01.alicdn.com/tps/i1/T1iJmAFfdbXXcIu7D9-488-187.png" alt=""></p>
<blockquote>
<p><code>gallery</code>的包名配置已经内置在<code>seed.js</code>中，因此当你引用 gallery 里的组件时，不用再人肉<strong>定义包</strong>了。此外包名必须手动配置添加，方法参照 loader。</p>
</blockquote>
<h2>官方模块的自动 Combo</h2>
<p>由于 KISSY 的模块非常颗粒化，会不会页面中载入的 JavaScript 文件过多，导致 HTTP 请求数太多呢？有两种方法来减少请求数：</p>
<ul>
<li>CDN 动态合并（Combo）</li>
<li>静态编译，本地合并</li>
</ul>
<p>这里只介绍动态合并，前提是你的 CDN 支持 Combo 功能，比如<code>KISSY.use(&#39;node&#39;)</code>会带来13个请求：</p>
<p><img src="http://gtms02.alicdn.com/tps/i2/T1IuezFfBdXXaC5N70-657-280.png" alt=""></p>
<p>要想开启动态Combo，在全局配置中增加一项<code>开启动态合并</code>：</p>
<pre><code>KISSY.config(&#39;combine&#39;,true);</code></pre>
<p>或者这样开启：</p>
<pre><code>&lt;script src=&quot;seed-min.js&quot; data-config=&quot;{combine:true}&quot;&gt;&lt;/script&gt;</code></pre>
<p>页面额外请求数变为1个：</p>
<p><img src="http://gtms03.alicdn.com/tps/i3/T12iCAFmlaXXa2La3m-575-80.png" alt=""></p>
<p>Combo 后的链接为：</p>
<pre><code>http://g.tbcdn.cn/kissy/k/1.4.0/??node-min.js,dom/base-min.js,event/dom/base-min.js,event/base-min.js,event/dom/shake-min.js,event/dom/focusin-min.js,anim-min.js,anim/base-min.js,event/custom-min.js,anim/timer-min.js,event-min.js,anim/transition-min.js</code></pre>


      
  <style>
	.github-btn {
		border: 0 none;
		overflow: hidden;
		margin-top:4px;
	}
	footer {
		border-top:1px solid #e2e2e2;
		padding-top:20px;
		clear:both;
	}
  </style>
  <footer>
	<div class="text-center">
		©2013 - 2033 KISSY UI LIBRARY
		<br /> <iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=kissyteam&amp;repo=kissy&amp;type=watch&amp;count=true" width="100" height="20" title="Star on GitHub"></iframe> 
	<iframe class="github-btn" src="http://ghbtns.com/github-btn.html?user=kissyteam&amp;repo=kissy&amp;type=fork&amp;count=true" width="102" height="20" title="Fork on GitHub"></iframe>
	</div>
  </footer>
    </article>
  </div>
  <script>
	var S = KISSY;
	(function(){
		S.use('node',function(S){
			S.all('code').each(function(node){
				var className = node.attr('class');
				if(/^lang-/.test(className)){
					var tc = className.replace(/^lang-/,'');
					node.replaceClass(className,tc);
				}
			});
			hljs.tabReplace = '    ';
			hljs.initHighlighting();
		});
	})();
  </script>
</body>
</html>
